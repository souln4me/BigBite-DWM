<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big Bite - Órdenes de Cocina</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="icon" type="image/png" sizes="32x32" href="../img/logo/cropped_circle_image.png">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="../css/sidebar.css">
    
    <style>
        /* ===== General ===== */
        body {
            background-color: #f8f9fa;
        }

        .admin-panel {
            padding: 2rem 1.5rem;
            font-family: 'Poppins', 'Arial', sans-serif;
        }

        /* ===== Tipografía ===== */
        .admin-panel h1,
        .admin-panel h3,
        .admin-panel h5,
        .admin-panel .card-title,
        .modal-title {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: #212529;
        }

        /* ===== Tarjetas Principales ===== */
        .admin-panel .card-dashboard {
            border-radius: 40px; /* Radio específico */
            background-color: #ffffff;
            border: none;
            box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }

        .admin-panel .card-dashboard .card-header {
            background-color: #ffffff;
            color: #212529;
            border-bottom: 1px solid #dee2e6;
            font-weight: 600;
            font-size: 1.1rem; /* 17.6px */
            padding: 25px 30px; /* Padding base */
            border-top-left-radius: 40px; /* Coincide con card */
            border-top-right-radius: 40px;
        }
         /* Padding Consistente Card Body */
        .admin-panel .card-dashboard .card-body {
            padding: 25px 30px; 
        }
        /* Ajuste específico para barra de herramientas/filtros */
        .admin-panel .card-dashboard.mb-4 .card-body { 
            padding: 20px 30px; 
        }


        /* ===== Botones ===== */
        .admin-panel .btn,
        .modal-footer .btn {
            border-radius: 50rem;
            font-weight: 600;
            transition: background-color 0.2s ease, border-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease; 
            border: 2px solid transparent; 
            padding: 0.5rem 1.25rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .admin-panel .btn:hover,
        .modal-footer .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        /* Botones pequeños de tabla */
        .admin-panel .btn-sm {
            padding: 0.25rem 0.75rem;
            font-weight: 500;
            font-size: 0.8rem;
            border-width: 1px;
        }

        .admin-panel .table-actions .btn {
            margin-right: 0.25rem;
        }

        .admin-panel .table-actions {
            white-space: nowrap;
        }

        /* Botón Amarillo (Primario) */
        .admin-panel .btn.btn-primary,
        .modal-footer .btn.btn-primary {
            background-color: #ffc107;
            border-color: transparent; 
            color: #212529;
        }

        .admin-panel .btn.btn-primary:hover,
        .modal-footer .btn.btn-primary:hover {
            background-color: #e0a800; /* Color Hover */
            border-color: transparent; 
            color: #212529;
        }
        
        /* Estado presionado (:active) para botones primarios */
        .admin-panel .btn.btn-primary:active,
        .modal-footer .btn.btn-primary:active {
            background-color: #e0a800 !important; /* MISMO COLOR QUE HOVER */
            border-color: transparent !important; /* SIN BORDE NEGRO */
            transform: none; 
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important; /* Sombra normal */
        }

        /* Foco visible (teclado) para botones primarios */
        .admin-panel .btn.btn-primary:focus-visible,
        .modal-footer .btn.btn-primary:focus-visible {
           box-shadow: 0 0 0 0.25rem rgba(255, 193, 7, 0.5); 
           border-color: transparent; 
        }

        /* Botón Rojo (Peligro) */
        .admin-panel .btn.btn-danger,
        .modal-footer .btn.btn-danger {
            background-color: #dc3545;
            border-color: transparent; 
            color: #fff;
        }
        .admin-panel .btn.btn-danger:hover,
        .modal-footer .btn.btn-danger:hover {
            background-color: #bb2d3b;
            border-color: transparent;
            color: #fff;
        }
         /* Estado presionado (:active) para botones danger */
        .admin-panel .btn.btn-danger:active,
        .modal-footer .btn.btn-danger:active {
            background-color: #bb2d3b !important;
            border-color: transparent !important;
            transform: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important;
        }
        /* Foco visible (teclado) para botones danger */
        .admin-panel .btn.btn-danger:focus-visible,
        .modal-footer .btn.btn-danger:focus-visible {
             box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.5);
             border-color: transparent; 
        }
        
        /* Botón Verde (Success) - Usado en Cocina */
         .admin-panel .btn.btn-success,
        .modal-footer .btn.btn-success {
            background-color: #198754;
            border-color: transparent; 
            color: #fff;
        }
        .admin-panel .btn.btn-success:hover,
        .modal-footer .btn.btn-success:hover {
            background-color: #157347;
            border-color: transparent;
            color: #fff;
        }
        .admin-panel .btn.btn-success:active,
        .modal-footer .btn.btn-success:active {
            background-color: #157347 !important;
            border-color: transparent !important;
            transform: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important;
        }
        .admin-panel .btn.btn-success:focus-visible,
        .modal-footer .btn.btn-success:focus-visible {
             box-shadow: 0 0 0 0.25rem rgba(25, 135, 84, 0.5);
             border-color: transparent; 
        }

        /* Botón Azul (Info) - Usado en Cocina */
         .admin-panel .btn.btn-info,
        .modal-footer .btn.btn-info {
            background-color: #0dcaf0;
            border-color: transparent; 
            color: #000; /* Texto oscuro para contraste */
        }
        .admin-panel .btn.btn-info:hover,
        .modal-footer .btn.btn-info:hover {
            background-color: #31d2f2;
            border-color: transparent;
            color: #000;
        }
        .admin-panel .btn.btn-info:active,
        .modal-footer .btn.btn-info:active {
            background-color: #31d2f2 !important;
            border-color: transparent !important;
            transform: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important;
        }
        .admin-panel .btn.btn-info:focus-visible,
        .modal-footer .btn.btn-info:focus-visible {
             box-shadow: 0 0 0 0.25rem rgba(13, 202, 240, 0.5);
             border-color: transparent; 
        }


        /* Botón de Dropdown de Usuario y Secundarios */
        .admin-panel .btn.btn-outline-secondary,
        .modal-footer .btn.btn-secondary {
            border-radius: 50rem;
            font-weight: 500;
            border: 1px solid #ced4da; 
            color: #495057;
            background-color: #fff;
            padding: 0.5rem 1.25rem; 
        }

        .admin-panel .btn.btn-outline-secondary:hover,
        .modal-footer .btn.btn-secondary:hover {
            background-color: #e9ecef;
            transform: none;
            box-shadow: none;
        }

        .modal-footer .btn.btn-secondary {
            font-weight: 600;
        }
         /* Foco visible (teclado) para secundarios */
        .admin-panel .btn.btn-outline-secondary:focus-visible,
        .modal-footer .btn.btn-secondary:focus-visible {
            box-shadow: 0 0 0 0.25rem rgba(108, 117, 125, 0.5);
        }


        /* Botones de acciones de tabla y filtros */
        .admin-panel .btn.btn-outline-primary {
            border-color: #ffc107;
            color: #e0a800;
            background-color: transparent; 
        }
        .admin-panel .btn.btn-outline-primary:hover,
        .admin-panel .btn.btn-outline-primary.active { /* Estado activo para filtros */
            background-color: #ffc107;
            color: #212529;
            border-color: #ffc107;
        }
        
         .admin-panel .btn.btn-outline-success { /* Filtro Nuevas */
            border-color: #198754;
            color: #198754;
            background-color: transparent;
        }
        .admin-panel .btn.btn-outline-success:hover,
        .admin-panel .btn.btn-outline-success.active {
            background-color: #198754;
            color: #fff;
            border-color: #198754;
        }
        
        .admin-panel .btn.btn-outline-warning { /* Filtro Preparacion y Acción Retraso */
            border-color: #ffc107;
            color: #e0a800;
            background-color: transparent;
        }
         .admin-panel .btn.btn-outline-warning:hover,
         .admin-panel .btn.btn-outline-warning.active {
            background-color: #ffc107;
            color: #212529;
            border-color: #ffc107;
        }

        .admin-panel .btn.btn-outline-danger {
            border-color: #dc3545;
            color: #dc3545;
             background-color: transparent;
        }
        .admin-panel .btn.btn-outline-danger:hover {
            background-color: #dc3545;
            color: #fff;
            border-color: #dc3545;
        }

        .admin-panel .btn.btn-outline-info { /* Filtro Listas y Acción Historial */
            border-color: #0dcaf0;
            color: #0dcaf0;
             background-color: transparent;
        }
        .admin-panel .btn.btn-outline-info:hover,
        .admin-panel .btn.btn-outline-info.active {
            background-color: #0dcaf0;
            color: #000;
            border-color: #0dcaf0;
        }
        
        .admin-panel .btn.btn-outline-dark { /* Botones Header Cocina */
            border-color: rgba(33, 37, 41, 0.5);
            color: #212529;
            background-color: transparent;
        }
        .admin-panel .btn.btn-outline-dark:hover {
            background-color: rgba(33, 37, 41, 0.1);
            color: #212529;
            border-color: rgba(33, 37, 41, 0.5);
        }


        /* QUITAR SOMBRA DE FOCO EN CLIC (botones generales) */
        .admin-panel .btn:focus:not(:focus-visible),
        .modal-footer .btn:focus:not(:focus-visible) {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); /* Sombra normal */
            outline: none; 
        }


        /* ===== Inputs y Formularios ===== */
        .admin-panel .form-control,
        .admin-panel .form-select,
        .modal-body .form-control,
        .modal-body .form-select {
            border-radius: 0.5rem; 
            border: 1px solid #ced4da;
            padding: 0.5rem 1rem;
            font-weight: 500;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        /* Inputs pequeños (sm) usados en cocina */
        .admin-panel .input-group-sm > .form-control, 
        .admin-panel .input-group-sm > .btn {
            padding: 0.25rem 0.75rem;
            font-size: 0.875rem;
        }
        
        /* Estado :focus */
        .admin-panel .form-control:focus,
        .admin-panel .form-select:focus,
        .modal-body .form-control:focus,
        .modal-body .form-select:focus {
            border-color: #ffc107;
            box-shadow: 0 0 0 0.25rem rgba(255, 193, 7, 0.25); 
        }

        /* Barra de búsqueda (Input dentro de input-group) */
        .admin-panel .input-group > .form-control { 
            border-radius: 50rem 0 0 50rem; 
            border-right: none; 
        }
        .admin-panel .input-group > .form-control:focus {
             box-shadow: 0 0 0 0.25rem rgba(255, 193, 7, 0.25); 
             z-index: 3; 
        }

        /* Botón de búsqueda (pegado al input) */
        .admin-panel .input-group > .btn.btn-primary { 
            border-radius: 0 50rem 50rem 0 !important;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); 
            border: 1px solid #ced4da; 
            border-left: none; 
            padding: 0.5rem 1rem; 
            border-color: #ced4da; 
            border-left: none; 
        }
        /* Padding ajustado para botón sm */
        .admin-panel .input-group-sm > .btn.btn-primary {
             padding: 0.25rem 0.75rem;
        }
        
        .admin-panel .input-group > .btn.btn-primary:hover {
            border-color: #ced4da; 
        }
        /* Estado presionado del botón de búsqueda */
         .admin-panel .input-group > .btn.btn-primary:active {
            background-color: #e0a800 !important; 
            border: 1px solid #ced4da !important; 
            border-left: none !important;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important;
            transform: none !important;
        }
        /* Foco visible (teclado) del botón de búsqueda */
        .admin-panel .input-group > .btn.btn-primary:focus-visible {
             box-shadow: 0 0 0 0.25rem rgba(255, 193, 7, 0.5);
             border-color: #ffc107; 
             border-left: none; 
             z-index: 3;
        }
        /* Quitar sombra foco en click del botón de búsqueda */
        .admin-panel .input-group > .btn.btn-primary:focus:not(:focus-visible) {
             box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); 
             border-color: #ced4da; 
             border-left: none;
             outline: none;
        }


        .admin-panel label,
        .modal-body label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 0.25rem;
            font-size: 0.9rem;
        }

         /* Estilo para el check */
        .modal-body .form-check-input {
            border-radius: 0.25em;
            border: 1px solid #ced4da;
            box-shadow: none;
        }
         .modal-body .form-check-input:checked {
            background-color: #ffc107;
            border-color: #ffc107;
        }
         .modal-body .form-check-input:focus {
             border-color: #ffc107;
             box-shadow: 0 0 0 0.25rem rgba(255, 193, 7, 0.25);
        }
        .modal-body .form-check-label {
            font-weight: 500;
            font-size: 1rem;
            color: #495057;
        }

        /* ===== Tabla ===== */
        .admin-panel .table-responsive {
            border-radius: 0.75rem;
            overflow: hidden;
            border: 1px solid #dee2e6;
            box-shadow: none;
        }

        .admin-panel .table th,
        .admin-panel .table td {
            vertical-align: middle;
            padding: 1rem;
        }

        .admin-panel .table thead {
            background-color: #212529;
            color: #fff;
        }

        .admin-panel .table-hover tbody tr:hover {
            background-color: #fff8e1;
        }

        /* ===== Dropdowns ===== */
        .admin-panel .dropdown-menu {
            border-radius: 0.75rem;
            padding: 0.5rem 0;
            border: 1px solid #dee2e6;
            box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.05);
        }

        /* ===== Modal ===== */
        .modal-content {
            border-radius: 1rem; /* Radio estándar */
            border: none;
            box-shadow: 0 0.5rem 1.5rem rgba(0,0,0,0.15);
            overflow: hidden; 
        }
        .modal-header {
            border-bottom: 1px solid #dee2e6;
            padding: 1.25rem 1.5rem; 
        }
        .modal-body {
            padding: 1.5rem; 
        }
        .modal-footer {
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
            padding: 1rem 1.5rem; 
            border-bottom-left-radius: 1rem; 
            border-bottom-right-radius: 1rem;
        }
        .modal-body h5 { /* Subtítulo "Datos opcionales" */
            font-weight: 600;
            color: #6c757d;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 0.5rem;
            margin-top: 1.5rem; 
        }

         /* Icono del ojo en contraseña */
        .modal-body .input-group > .form-control { 
            border-radius: 0.5rem 0 0 0.5rem;
            border-right: none;
        }
         .modal-body .input-group > .input-group-text { 
            cursor: pointer;
            border-radius: 0 0.5rem 0.5rem 0;
            border: 1px solid #ced4da;
            border-left: none;
            background-color: #fff;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        /* Estilo foco para el input + span */
        .modal-body .input-group > .form-control:focus {
             z-index: 3;
             box-shadow: 0 0 0 0.25rem rgba(255, 193, 7, 0.25);
        }
        .modal-body .input-group > .form-control:focus + .input-group-text {
             border-color: #ffc107;
             box-shadow: 0 0 0 0.25rem rgba(255, 193, 7, 0.25);
             z-index: 3;
        }

        /* ===== Badges ===== */
        .admin-panel .badge {
            font-weight: 600;
            padding: 0.5em 0.75em;
            border-radius: 50rem;
            font-size: 0.8rem;
            border: 1px solid transparent;
        }
        /* Específicos para Estado */
        .admin-panel .badge.bg-success { /* Activo */
            color: #0a3622;
            background-color: #d1e7dd;
            border-color: #b1d3c6;
        }
        .admin-panel .badge.bg-warning { /* Inactivo */
            color: #332701 !important; /* Texto oscuro */
            background-color: #fff3cd;
            border-color: #ffecb5;
        }
        .admin-panel .badge.bg-danger { /* Sin Stock */
            color: #58151c;
            background-color: #f8d7da;
            border-color: #f1b0b7;
        }
         .admin-panel .badge.bg-info { /* Lista (Cocina) */
             color: #055160 !important; /* Texto oscuro */
             background-color: #cff4fc;
             border-color: #aeeafc;
        }
        /* Específicos para Rol (Usuarios) */
        .admin-panel .badge.role-owner { 
            color: #6f42c1; 
            background-color: #e9d5ff;
            border-color: #d8b4fe;
        }
        .admin-panel .badge.role-admin { 
            color: #055160 !important; /* Texto oscuro */
            background-color: #cff4fc;
            border-color: #aeeafc;
        }
        .admin-panel .badge.role-manager { 
            color: #0a3622; 
            background-color: #d1e7dd;
            border-color: #b1d3c6;
        }
        .admin-panel .badge.role-user { 
            color: #41464b;
            background-color: #e2e3e5;
            border-color: #d3d6d8;
        }
        .admin-panel .badge.role-delivery { 
            color: #332701 !important; /* Texto oscuro */
            background-color: #fff3cd;
            border-color: #ffecb5;
        }

        /* ===================================== */
        /* ==== Estilos Específicos REPORTES ==== */
        /* ===================================== */

        /* Inputs de Fecha */
        .admin-panel #fechaDesde,
        .admin-panel #fechaHasta {
            padding: 0.5rem 1rem; /* Padding estándar */
            border-radius: 0.5rem; /* Radio estándar */
        }

        /* Tarjetas de Estadísticas */
        .admin-panel .stat-card {
            background-color: #fff;
            border-radius: 1rem; /* Radio estándar */
            border: 1px solid #dee2e6; 
            box-shadow: none;
            color: #212529;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        .admin-panel .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.25rem 1rem rgba(0, 0, 0, 0.07);
        }
        .admin-panel .stat-card .card-body {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem; 
        }
        .admin-panel .stat-card .stat-icon {
            font-size: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .admin-panel .stat-card h6 {
            font-weight: 500;
            font-size: 0.9rem;
            color: #6c757d; 
            margin-bottom: 0.25rem;
        }
        .admin-panel .stat-card h3 {
            font-weight: 700;
            margin: 0;
            font-size: 1.75rem;
        }
        /* Colores específicos */
        .stat-card.ventas .stat-icon { background-color: #e0f8e9; color: #198754; }
        .stat-card.promedio .stat-icon { background-color: #fff8e1; color: #ffc107; }
        .stat-card.pedidos .stat-icon { background-color: #e0f2fe; color: #0d6efd; }
        .stat-card.productos .stat-icon { background-color: #fdeded; color: #dc3545; }

        /* Botones de Exportar */
        .admin-panel .btn.btn-export-pdf {
            background-color: #dc3545; 
            border-color: transparent; 
            color: #fff;
        }
        .admin-panel .btn.btn-export-pdf:hover { background-color: #bb2d3b; border-color: transparent; color: #fff; }
        .admin-panel .btn.btn-export-pdf:active { background-color: #bb2d3b !important; border-color: transparent !important; transform: none; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important; }
        .admin-panel .btn.btn-export-pdf:focus-visible { box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.5); border-color: transparent; }

        .admin-panel .btn.btn-export-excel {
            background-color: #198754; 
            border-color: transparent; 
            color: #fff;
        }
        .admin-panel .btn.btn-export-excel:hover { background-color: #157347; border-color: transparent; color: #fff; }
        .admin-panel .btn.btn-export-excel:active { background-color: #157347 !important; border-color: transparent !important; transform: none; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05) !important; }
        .admin-panel .btn.btn-export-excel:focus-visible { box-shadow: 0 0 0 0.25rem rgba(25, 135, 84, 0.5); border-color: transparent; }

        /* Alertas */
        .admin-panel .alert {
            border-radius: 0.75rem;
            font-weight: 500;
        }

        /* ===================================== */
        /* ==== Estilos Específicos COCINA ===== */
        /* ===================================== */

        .kitchen-header {
            background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%); 
            color: #212529; 
            padding: 1rem 0; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            /* Sin border-radius */
        }
        .kitchen-header h1 {
            color: #212529;
            font-size: 1.5rem; 
        }
        .kitchen-header small {
            color: #495057; 
        }

        /* Tarjeta de Orden */
        .order-card {
            border: none;
            border-radius: 1rem; 
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08); 
            margin-bottom: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
            background-color: #fff; 
            overflow: hidden; 
            position: relative; 
            padding-left: 10px; 
        }
        /* Borde coloreado */
        .order-card::before {
            content: "";
            position: absolute;
            left: 0; top: 0; bottom: 0;
            width: 8px; 
            background-color: #6c757d; 
            border-radius: 1rem 0 0 1rem; 
        }
        .order-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
        }
        /* Colores del borde por estado */
        .order-card.status-new::before { background-color: #198754; } 
        .order-card.status-preparing::before { background-color: #ffc107; } 
        .order-card.status-ready::before { background-color: #0dcaf0; } 
        .order-card.status-completed::before { background-color: #6c757d; } 

        /* Header de la tarjeta de orden */
        .order-card .card-header {
            background-color: #fff;
            border-bottom: 1px solid #eee; 
            padding: 0.75rem 1rem; 
             border-radius: 0; /* Sin radio interno */
        }
        .order-card .badge { 
             font-size: 0.75rem; 
        }
        /* Badge Timer */
        .timer-badge {
            background-color: #6c757d; 
            color: #fff; 
            font-family: monospace;
            font-size: 0.8rem;
            padding: 0.3em 0.6em;
             border-radius: 50rem; 
        }

        /* Cuerpo de la tarjeta de orden */
        .order-card .card-body {
            padding: 1rem; /* Padding estándar reducido */
        }
        .order-card .card-title {
            font-size: 1rem; 
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        .order-card .card-text strong {
            color: #495057;
        }

        /* Lista de productos en la orden */
        .product-list {
            list-style: none;
            padding-left: 0;
            margin-top: 0.75rem;
            margin-bottom: 1rem;
            font-size: 0.9rem; 
        }
        .product-list li {
            padding: 6px 0;
            border-bottom: 1px dashed #eee; 
            display: flex;
            justify-content: space-between;
        }
        .product-list li:last-child {
            border-bottom: none;
        }
        .product-list .quantity { 
            font-weight: 600;
            margin-right: 5px;
        }

        /* Acciones de la orden */
        .order-actions {
            border-top: 1px solid #eee;
            padding-top: 1rem;
            margin-top: 1rem;
        }
         /* Botones de icono (ojo, impresora, warning) más grandes */
        .order-actions .btn-outline-secondary,
        .order-actions .btn-outline-warning {
            padding: 0.35rem 0.65rem; 
            font-size: 0.9rem; 
        }

        /* Botones específicos de cocina */
        .btn-kitchen {
            font-weight: 600;
        }

        /* Tarjeta de Estadísticas Rápidas (inferior) */
        .quick-stats-card .card-body {
            padding: 1rem; /* Padding reducido */
        }
        .quick-stats-card h4 {
            margin-bottom: 0.25rem;
            font-weight: 700;
        }
        .quick-stats-card small {
            font-size: 0.85rem;
        }
    </style>
</head>

<body>
    <div id="sidebar-placeholder"></div>
    <div class="main-content">

        <div class="kitchen-header mb-4">
            <div class="container-fluid px-4">

                <div class="row align-items-center">
                    <div class="col-md-6">
                        <h1 class="h3 mb-0"><i class="bi bi-egg-fried me-2"></i>Órdenes para Cocina</h1><small
                            class="opacity-75">Sistema de gestión de órdenes en tiempo real</small>
                    </div>
                    <div class="col-md-6 text-end">
                        <div class="btn-group">

                            <button class="btn btn-sm btn-outline-dark" data-bs-toggle="modal"
                                data-bs-target="#modalConfigImpresion"><i class="bi bi-gear-fill me-1"></i>Configurar
                                Impresión </button><button class="btn btn-sm btn-outline-dark"
                                onclick="actualizarOrdenes()"><i class="bi bi-arrow-clockwise me-1"></i>Actualizar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid px-4">
            <div class="admin-panel pt-0">

                <div class="card card-dashboard mb-4">
                    <div class="card-body p-3"> 

                        <div class="row g-3 align-items-center">
                            <div class="col-lg-8 col-md-7">
                                <div class="btn-group flex-wrap" role="group">

                                    <button type="button" class="btn btn-sm btn-outline-primary active"
                                        onclick="filtrarOrdenes('todas')"><i class="bi bi-list-ul me-1"></i>Todas
                                    </button><button type="button" class="btn btn-sm btn-outline-success"
                                        onclick="filtrarOrdenes('nuevas')"><i class="bi bi-bell-fill me-1"></i>Nuevas
                                    </button><button type="button" class="btn btn-sm btn-outline-warning"
                                        onclick="filtrarOrdenes('preparacion')"><i
                                            class="bi bi-hourglass-split me-1"></i>En Preparación </button><button
                                        type="button" class="btn btn-sm btn-outline-info"
                                        onclick="filtrarOrdenes('listas')"><i
                                            class="bi bi-check-circle-fill me-1"></i>Listas </button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-5">
                                <div class="input-group input-group-sm">

                                    <input type="text" class="form-control" placeholder="Buscar orden..."
                                        id="buscarOrden"><button class="btn btn-primary" type="button"><i
                                            class="bi bi-search"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row" id="listaOrdenes">
                    <!-- Orden 1: Nueva -->
                    <div class="col-lg-6 mb-4">
                        <div class="card order-card status-new">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <div><span class="badge bg-success">NUEVA</span><small class="text-muted ms-2">Hace 2
                                        min</small></div><span class="badge timer-badge"><i
                                        class="bi bi-stopwatch me-1"></i>15 min</span>
                            </div>
                            <div class="card-body">
                                <h6 class="card-title">Orden #BGT-001</h6>
                                <p class="card-text small mb-2">
                                    <strong>Cliente:</strong> Juan Pérez<br><strong>Ubicación:</strong> Mesa 4
                                </p>
                                <ul class="product-list">
                                    <li><span class="quantity">2x</span> 🍔 Hamburguesa Clásica</li>
                                    <li><span class="quantity">1x</span> 🍟 Papas Especiales</li>
                                    <li><span class="quantity">1x</span> 🥤 Combo Papas - Bebida</li>
                                </ul>
                                <div class="order-actions text-end">
                                    <button class="btn btn-sm btn-outline-secondary me-1"
                                        onclick="imprimirOrden('BGT-001')"><i
                                            class="bi bi-printer-fill"></i></button><button
                                        class="btn btn-sm btn-success btn-kitchen"
                                        onclick="marcarEnPreparacion('BGT-001')"><i
                                            class="bi bi-play-fill me-1"></i> Iniciar </button>
                                </div>
                            </div>
                        </div>
                    </div>

                     <!-- Orden 2: En Preparación -->
                    <div class="col-lg-6 mb-4">
                        <div class="card order-card status-preparing">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <div><span class="badge bg-warning">EN PREPARACIÓN</span>
                                    <small class="text-muted ms-2">Hace 5 min</small>
                                </div><span class="badge timer-badge"><i class="bi bi-stopwatch me-1"></i>20 min</span>
                            </div>
                            <div class="card-body">
                                <h6 class="card-title">Orden #BGT-002</h6>
                                <p class="card-text small mb-2"><strong>Cliente:</strong> María
                                    González<br><strong>Ubicación:</strong> Delivery </p>
                                <ul class="product-list">
                                    <li><span class="quantity">1x</span> 🍔 Hamburguesa BBQ</li>
                                    <li><span class="quantity">1x</span> 🍔 Hamburguesa Vegana</li>
                                    <li><span class="quantity">2x</span> 🍟 Papas Fritas Queso</li>
                                </ul>
                                <div class="order-actions text-end">
                                    <button class="btn btn-sm btn-outline-secondary me-1"
                                        onclick="verDetalles('BGT-002')"><i class="bi bi-eye-fill"></i></button>
                                    <button class="btn btn-sm btn-info btn-kitchen"
                                        onclick="marcarLista('BGT-002')">
                                        <i class="bi bi-check-lg me-1"></i> Lista 
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Orden 3: Lista para Entrega -->
                    <div class="col-lg-6 mb-4">
                        <div class="card order-card status-ready">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <div><span class="badge bg-info">LISTA</span>
                                    <small class="text-muted ms-2">Hace 8 min</small>
                                </div><span class="badge timer-badge"><i class="bi bi-stopwatch me-1"></i>10 min</span>
                            </div>
                            <div class="card-body">
                                <h6 class="card-title">Orden #BGT-003</h6>
                                <p class="card-text small mb-2"><strong>Cliente:</strong> Carlos
                                    López<br><strong>Ubicación:</strong> Mesa 2 </p>
                                <ul class="product-list">
                                    <li><span class="quantity">3x</span> 🥤 Combo Papas - Bebida</li>
                                </ul>
                                <div class="order-actions text-end">
                                    <button class="btn btn-sm btn-outline-warning me-1"
                                        onclick="notificarRetraso('BGT-003')"><i
                                            class="bi bi-exclamation-triangle-fill"></i></button>
                                    <button class="btn btn-sm btn-primary btn-kitchen" onclick="marcarEntregada('BGT-003')">
                                        <i class="bi bi-box-arrow-up-right me-1"></i> Entregar 
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Orden 4: Nueva (Múltiple) -->
                    <div class="col-lg-6 mb-4">
                        <div class="card order-card status-new">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <div><span class="badge bg-success">NUEVA</span><small class="text-muted ms-2">Hace 1
                                        min</small></div><span class="badge timer-badge"><i
                                        class="bi bi-stopwatch me-1"></i>25 min</span>
                            </div>
                            <div class="card-body">
                                <h6 class="card-title">Orden #BGT-004</h6>
                                <p class="card-text small mb-2"><strong>Cliente:</strong> Ana
                                    Silva<br><strong>Ubicación:</strong> Take Away </p>
                                <ul class="product-list">
                                    <li><span class="quantity">2x</span> 🍔 Hamburguesa Doble</li>
                                    <li><span class="quantity">1x</span> 🍟 Papas Grandes</li>
                                    <li><span class="quantity">2x</span> 🥤 Bebida Grande</li>
                                    <li><span class="quantity">1x</span> 🍦 Helado</li>
                                </ul>
                                <div class="order-actions text-end">
                                    <button class="btn btn-sm btn-outline-secondary me-1"
                                        onclick="imprimirOrden('BGT-004')"><i
                                            class="bi bi-printer-fill"></i></button>
                                    <button class="btn btn-sm btn-success btn-kitchen"
                                        onclick="marcarEnPreparacion('BGT-004')"><i
                                            class="bi bi-play-fill me-1"></i> Iniciar 
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                 <!-- Estadísticas Rápidas -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card card-dashboard quick-stats-card"> 
                             <!-- Padding controlado por CSS -->
                            <div class="card-body">
                                <div class="row text-center">
                                    <div class="col-md-3 col-6 mb-2 mb-md-0">
                                        <h4 class="text-success mb-0" id="contadorNuevas">2</h4><small
                                            class="text-muted">Nuevas</small>
                                    </div>
                                    <div class="col-md-3 col-6 mb-2 mb-md-0">
                                        <h4 class="text-warning mb-0" id="contadorPreparacion">1</h4><small
                                            class="text-muted">En Preparación</small>
                                    </div>
                                    <div class="col-md-3 col-6">
                                        <h4 class="text-info mb-0" id="contadorListas">1</h4><small
                                            class="text-muted">Listas</small>
                                    </div>
                                    <div class="col-md-3 col-6">
                                        <h4 class="text-primary mb-0" id="contadorTotal">4</h4><small
                                            class="text-muted">Total Activas</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> </div> </div> <div class="modal fade" id="modalConfigImpresion" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><i class="bi bi-gear-fill me-2"></i>Configurar Impresión</h5><button
                        type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3"><label class="form-label">Impresora</label><select class="form-select">
                            <option selected>Impresora Cocina Principal</option>
                            <option>Impresora Cocina Secundaria</option>
                            <option>Impresora Bar</option>
                        </select></div>
                    <div class="mb-3"><label class="form-label">Copias</label><input type="number" class="form-control"
                            value="1" min="1" max="3"></div>
                    <div class="form-check"><input class="form-check-input" type="checkbox" checked
                            id="autoImprimir"><label class="form-check-label" for="autoImprimir">Imprimir
                            automáticamente nuevas órdenes </label></div>
                </div>
                <div class="modal-footer"><button type="button" class="btn btn-secondary"
                        data-bs-dismiss="modal">Cancelar</button><button type="button" class="btn btn-primary"><i
                            class="bi bi-save-fill me-1"></i>Guardar </button></div>
            </div>
        </div>
    </div>
    
    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1100">
        <div id="toastImpresionExitosa" class="toast align-items-center text-bg-success border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body"><i class="bi bi-check-circle-fill me-2"></i>Orden #<span
                        id="ordenExitosaNumero"></span> impresa </div><button type="button"
                    class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        </div>
        <div id="toastErrorImpresion" class="toast align-items-center text-bg-danger border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body"><i class="bi bi-exclamation-triangle-fill me-2"></i>Error de impresión.
                    Reintentando... </div><button type="button" class="btn-close btn-close-white me-2 m-auto"
                    data-bs-dismiss="toast"></button>
            </div>
        </div>
        <div id="toastEstadoCambiado" class="toast align-items-center text-bg-info border-0" role="alert">
            <div class="d-flex text-dark">
                <div class="toast-body" id="mensajeEstadoCambiado"><i class="bi bi-info-circle-fill me-2"></i>Estado
                    actualizado </div><button type="button" class="btn-close me-2 m-auto"
                    data-bs-dismiss="toast"></button>
            </div>
        </div>
    </div>
    
    <script> // --- Carga del Sidebar ---

        fetch('includes/sidebar.html').then(response => {
            if (!response.ok) throw new Error(`HTTP error ! status: ${response.status}`);
            return response.text();
        }).then(data => {
            const sidebarPlaceholder = document.getElementById('sidebar-placeholder');
            if (sidebarPlaceholder) {
                sidebarPlaceholder.innerHTML = data;
                // Listeners del sidebar
                const toggle = document.getElementById('sidebarToggle');
                if (toggle) {
                    toggle.addEventListener('click', function () {
                        document.querySelector('.nav-sidebar')?.classList.toggle('active');
                    });
                }
                const currentPage = window.location.pathname.split('/').pop() || 'index.html';
                const links = sidebarPlaceholder.querySelectorAll('.nav-sidebar .nav-link');
                links.forEach(link => {
                    const linkPage = link.getAttribute('href')?.split('/').pop();
                    if (linkPage === currentPage) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            }
        }).catch(error => console.error('Error cargando el sidebar:', error));

        // --- Lógica de Órdenes de Cocina ---
        document.addEventListener('DOMContentLoaded', () => {

            // Simulación de base de datos de órdenes
            const ordenes = {
                'BGT-001': { estado: 'nueva', timestamp: Date.now() - 120000 },
                'BGT-002': { estado: 'preparacion', timestamp: Date.now() - 300000 },
                'BGT-003': { estado: 'lista', timestamp: Date.now() - 480000 },
                'BGT-004': { estado: 'nueva', timestamp: Date.now() - 60000 }
            };

            const listaOrdenesDiv = document.getElementById('listaOrdenes');

            // --- Funciones para mostrar toasts ---
            function mostrarToast(idToast, mensaje = null, numeroOrden = null) {
                const toastEl = document.getElementById(idToast);
                if (!toastEl) return;

                if (idToast === 'toastImpresionExitosa' && numeroOrden) {
                    const numSpan = toastEl.querySelector('#ordenExitosaNumero');
                    if (numSpan) numSpan.textContent = numeroOrden;
                } else if (idToast === 'toastEstadoCambiado' && mensaje) {
                    const msgBody = toastEl.querySelector('#mensajeEstadoCambiado');
                    let iconClass = 'bi-info-circle-fill'; 
                    if(mensaje.includes('preparación')) iconClass = 'bi-hourglass-split';
                    else if(mensaje.includes('lista')) iconClass = 'bi-check-circle-fill';
                    else if(mensaje.includes('entregada')) iconClass = 'bi-box-arrow-up-right';
                    
                    if (msgBody) msgBody.innerHTML = `<i class="bi ${iconClass} me-2" ></i> ${mensaje}`;
                }

                const toastInstance = bootstrap.Toast.getOrCreateInstance(toastEl);
                toastInstance.show();
            }

            // --- Funciones de Gestión ---
            // Exponer funciones al scope global para que los onclick funcionen
            window.imprimirOrden = function (numeroOrden) {
                console.log(`Imprimiendo orden #${numeroOrden}...`);
                const exito = Math.random() > 0.2; 
                if (exito) {
                    mostrarToast('toastImpresionExitosa', null, numeroOrden);
                } else {
                    mostrarToast('toastErrorImpresion');
                }
            }

            window.marcarEnPreparacion = function (numeroOrden) {
                if (ordenes[numeroOrden]) {
                    ordenes[numeroOrden].estado = 'preparacion';
                    actualizarInterfaz();
                    mostrarToast('toastEstadoCambiado', `Orden #${numeroOrden} en preparación`);
                }
            }

            window.marcarLista = function (numeroOrden) {
                if (ordenes[numeroOrden]) {
                    ordenes[numeroOrden].estado = 'lista';
                    actualizarInterfaz();
                    mostrarToast('toastEstadoCambiado', `Orden #${numeroOrden} lista para entrega`);
                }
            }

            window.marcarEntregada = function (numeroOrden) {
                if (ordenes[numeroOrden]) {
                    ordenes[numeroOrden].estado = 'completada'; 
                    actualizarInterfaz(); 
                    mostrarToast('toastEstadoCambiado', `Orden #${numeroOrden} entregada`);
                    // Opcional: Ocultar la tarjeta
                    const cardElement = document.querySelector(`.order-card[data-order-id="${numeroOrden}"]`); 
                    if(cardElement) setTimeout(() => cardElement.closest('.col-lg-6').style.display = 'none', 1500); 
                }
            }
            
            window.configurarImpresion = function () {
                const modalEl = document.getElementById('modalConfigImpresion');
                if (modalEl) bootstrap.Modal.getOrCreateInstance(modalEl).show();
            }

            window.actualizarOrdenes = function () {
                console.log('Actualizando lista de órdenes...');
                // Aquí fetch real
                actualizarInterfaz(); 
                mostrarToast('toastEstadoCambiado', 'Lista de órdenes actualizada');
            }

            window.filtrarOrdenes = function (tipo) {
                 console.log(`Filtrando órdenes por: ${tipo}`);
                 const botonesFiltro = document.querySelectorAll('.card-body .btn-group[role="group"] button'); // Selector más específico
                 botonesFiltro.forEach(btn => btn.classList.remove('active'));
                 
                 // Activar el botón correcto
                 const clickedButton = Array.from(botonesFiltro).find(btn => btn.getAttribute('onclick').includes(`'${tipo}'`));
                 if(clickedButton) clickedButton.classList.add('active');

                 // Filtrado visual
                 listaOrdenesDiv?.querySelectorAll('.order-card').forEach(card => {
                      const cardEstadoClass = Array.from(card.classList).find(cls => cls.startsWith('status-'));
                      const cardEstado = cardEstadoClass ? cardEstadoClass.split('-')[1] : null;
                      
                      let mappedEstado = cardEstado;
                      if (cardEstado === 'new') mappedEstado = 'nuevas';
                      else if (cardEstado === 'preparing') mappedEstado = 'preparacion';
                      else if (cardEstado === 'ready') mappedEstado = 'listas';
                      
                      const esVisible = tipo === 'todas' || tipo === mappedEstado;
                      
                      const colContainer = card.closest('.col-lg-6');
                      if(colContainer) colContainer.style.display = esVisible ? '' : 'none'; 
                 });
             }

             window.verDetalles = function(numeroOrden) {
                alert(`Funcionalidad pendiente: Ver detalles de la orden #${numeroOrden}`);
             }

             window.notificarRetraso = function(numeroOrden) {
                alert(`Funcionalidad pendiente: Notificar retraso en orden #${numeroOrden}`);
             }

            // --- Función para Actualizar UI ---
            function actualizarInterfaz() {
                const contadores = { nuevas: 0, preparacion: 0, listas: 0, total: 0 };
                let tieneNuevas = false, tienePreparacion = false, tieneListas = false;

                listaOrdenesDiv?.querySelectorAll('.order-card').forEach((card, index) => { // Añadir índice para ID único si no existe
                    let numeroOrden = card.dataset.orderId; // Usar data attribute si existe
                    if (!numeroOrden) { // Si no existe, intentar obtener del título y asignarlo
                        const numeroOrdenMatch = card.querySelector('.card-title')?.textContent.match(/#(\w+-\d+)/);
                        if (numeroOrdenMatch) {
                             numeroOrden = numeroOrdenMatch[1];
                             card.dataset.orderId = numeroOrden; // Guardar ID en data attribute
                        } else {
                             // Si ni así se encuentra, asigna uno temporal (no ideal)
                             numeroOrden = `temp-${index}`; 
                             card.dataset.orderId = numeroOrden;
                             if (!ordenes[numeroOrden]) ordenes[numeroOrden] = { estado: 'nueva', timestamp: Date.now()}; // Añadir temporal si no existe
                        }
                    }
                    
                    const orden = ordenes[numeroOrden];

                    if (!orden || orden.estado === 'completada') {
                        card.closest('.col-lg-6').style.display = 'none'; 
                        return;
                    } else {
                        // Asegurar visibilidad inicial antes de filtrar
                        card.closest('.col-lg-6').style.display = ''; 
                    }

                    card.classList.remove('status-new', 'status-preparing', 'status-ready', 'status-completed');
                    let badgeClass = 'bg-secondary';
                    let badgeText = orden.estado.toUpperCase();
                    
                    switch (orden.estado) {
                        case 'nueva':
                            card.classList.add('status-new');
                            badgeClass = 'bg-success'; badgeText = 'NUEVA';
                            contadores.nuevas++; tieneNuevas = true; break;
                        case 'preparacion':
                            card.classList.add('status-preparing');
                             badgeClass = 'bg-warning'; badgeText = 'EN PREPARACIÓN';
                            contadores.preparacion++; tienePreparacion = true; break;
                        case 'lista':
                            card.classList.add('status-ready');
                            badgeClass = 'bg-info'; badgeText = 'LISTA';
                            contadores.listas++; tieneListas = true; break;
                    }
                    contadores.total++;
                    
                    const statusBadge = card.querySelector('.card-header .badge:not(.timer-badge)');
                    if(statusBadge) {
                         statusBadge.className = `badge ${badgeClass}`; 
                         statusBadge.textContent = badgeText;
                    }
                    
                    const btnIniciar = card.querySelector('.btn-success');
                    const btnLista = card.querySelector('.btn-info');
                    const btnEntregar = card.querySelector('.btn-primary'); 
                    
                    if(btnIniciar) btnIniciar.style.display = orden.estado === 'nueva' ? '' : 'none';
                    if(btnLista) btnLista.style.display = orden.estado === 'preparacion' ? '' : 'none';
                    if(btnEntregar) btnEntregar.style.display = orden.estado === 'lista' ? '' : 'none';
                });
                
                // Actualiza contadores visuales
                const contNuevas = document.getElementById('contadorNuevas');
                const contPrep = document.getElementById('contadorPreparacion');
                const contListas = document.getElementById('contadorListas');
                const contTotal = document.getElementById('contadorTotal');
                if(contNuevas) contNuevas.textContent = contadores.nuevas;
                if(contPrep) contPrep.textContent = contadores.preparacion;
                if(contListas) contListas.textContent = contadores.listas;
                if(contTotal) contTotal.textContent = contadores.total;
                
                // Habilita/deshabilita botones de filtro
                 const btnFiltroNuevas = document.querySelector('button[onclick*="nuevas"]');
                 const btnFiltroPrep = document.querySelector('button[onclick*="preparacion"]');
                 const btnFiltroListas = document.querySelector('button[onclick*="listas"]');
                 if(btnFiltroNuevas) btnFiltroNuevas.disabled = !tieneNuevas;
                 if(btnFiltroPrep) btnFiltroPrep.disabled = !tienePreparacion;
                 if(btnFiltroListas) btnFiltroListas.disabled = !tieneListas;
            }

            // --- Búsqueda ---
            const buscarInput = document.getElementById('buscarOrden');
            const buscarBtn = buscarInput?.nextElementSibling; 
             if(buscarInput && buscarBtn) {
                 const buscar = () => {
                     const termino = buscarInput.value.toLowerCase().trim();
                     listaOrdenesDiv?.querySelectorAll('.order-card').forEach(card => {
                         const contenido = card.textContent.toLowerCase();
                         const esVisible = contenido.includes(termino);
                          card.closest('.col-lg-6').style.display = esVisible ? '' : 'none';
                     });
                 };
                 buscarInput.addEventListener('keyup', (e) => { if (e.key === 'Enter') buscar(); });
                 buscarBtn.addEventListener('click', buscar);
             }

            // --- Inicializar ---
            actualizarInterfaz();

        }); // Fin
    </script>
</body>
</html>